var rowGrid=function(f,d){function v(g){for(var c=[g];(g=g.nextSibling)&&9!==g.nodeType;)1===g.nodeType&&c.push(g);return c}function t(g,c,h){var d=0,e=[];h=Array.prototype.slice.call(h||g.querySelectorAll(c.itemSelector));var f=h.length,l=getComputedStyle(g);g=Math.floor(g.getBoundingClientRect().width)-parseFloat(l.getPropertyValue("padding-left"))-parseFloat(l.getPropertyValue("padding-right"));for(var l=[],b,k,n,a=0;a<f;++a)(b=h[a].getElementsByTagName("img")[0])?((k=parseInt(b.getAttribute("width")))||
b.setAttribute("width",k=b.offsetWidth),(n=parseInt(b.getAttribute("height")))||b.setAttribute("height",n=b.offsetHeight),l[a]={width:k,height:n}):(h.splice(a,1),--a,--f);f=h.length;for(b=0;b<f;++b){h[b].classList?(h[b].classList.remove(c.firstItemClass),h[b].classList.remove(c.lastRowClass)):h[b].className=h[b].className.replace(new RegExp("(^|\\b)"+c.firstItemClass+"|"+c.lastRowClass+"(\\b|$)","gi")," ");d+=l[b].width;e.push(h[b]);if(b===f-1)for(a=0;a<e.length;a++)0===a&&(e[a].className+=" "+c.lastRowClass),
e[a].style.cssText="width: "+l[b+parseInt(a)-e.length+1].width+"px;height: "+l[b+parseInt(a)-e.length+1].height+"px;margin-right:"+(a<e.length-1?c.minMargin+"px":0);if(d+c.maxMargin*(e.length-1)>g){k=d+c.maxMargin*(e.length-1)-g;a=e.length;(c.maxMargin-c.minMargin)*(a-1)<k?(n=c.minMargin,k-=(c.maxMargin-c.minMargin)*(a-1)):(n=c.maxMargin-k/(a-1),k=0);for(var r,p=0,a=0;a<e.length;a++){r=e[a];var q=l[b+parseInt(a)-e.length+1].width,m=q-q/d*k,q=Math.round(l[b+parseInt(a)-e.length+1].height*(m/q));.5<=
p+1-m%1?(p-=m%1,m=Math.floor(m)):(p+=1-m%1,m=Math.ceil(m));r.style.cssText="width: "+m+"px;height: "+q+"px;margin-right: "+(a<e.length-1?n:0)+"px";0===a&&(r.className+=" "+c.firstItemClass)}e=[];d=0}}}if(null!==f&&void 0!==f)if("appended"===d){d=JSON.parse(f.getAttribute("data-row-grid"));var u=f.getElementsByClassName(d.lastRowClass)[0],u=v(u);t(f,d,u)}else d||(d=JSON.parse(f.getAttribute("data-row-grid"))),t(f,d),f.setAttribute("data-row-grid",JSON.stringify(d)),d.resize&&window.addEventListener("resize",
function(g){t(f,d)})};