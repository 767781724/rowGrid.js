var rowGrid=function(f,d){function u(g){for(var c=[g];(g=g.nextSibling)&&9!==g.nodeType;)1===g.nodeType&&c.push(g);return c}function n(g,c,h){var d=0,e=[];h=Array.prototype.slice.call(h||g.querySelectorAll(c.itemSelector));var f=h.length,l=getComputedStyle(g);g=Math.floor(g.getBoundingClientRect().width)-parseFloat(l.getPropertyValue("padding-left"))-parseFloat(l.getPropertyValue("padding-right"));for(var l=[],b,k,q,a=0;a<f;++a)(b=h[a].getElementsByTagName("img")[0])?((k=parseInt(b.getAttribute("width")))||
b.setAttribute("width",k=b.offsetWidth),(q=parseInt(b.getAttribute("height")))||b.setAttribute("height",q=b.offsetHeight),l[a]={width:k,height:q}):(h.splice(a,1),--a,--f);f=h.length;for(b=0;b<f;++b){h[b].classList?(h[b].classList.remove(c.firstItemClass),h[b].classList.remove(c.lastRowClass)):h[b].className=h[b].className.replace(new RegExp("(^|\\b)"+c.firstItemClass+"|"+c.lastRowClass+"(\\b|$)","gi")," ");d+=l[b].width;e.push(h[b]);if(b===f-1)for(a=0;a<e.length;a++)0===a&&(e[a].className+=" "+c.lastRowClass),
e[a].style.cssText="width: "+l[b+parseInt(a)-e.length+1].width+"px;height: "+l[b+parseInt(a)-e.length+1].height+"px;margin-right:"+(a<e.length-1?c.minMargin+"px":0);if(d+c.maxMargin*(e.length-1)>g){k=d+c.maxMargin*(e.length-1)-g;a=e.length;(c.maxMargin-c.minMargin)*(a-1)<k?(q=c.minMargin,k-=(c.maxMargin-c.minMargin)*(a-1)):(q=c.maxMargin-k/(a-1),k=0);for(var t,n=null,r=0,a=0;a<e.length;a++){t=e[a];var p=l[b+parseInt(a)-e.length+1].width,m=p-p/d*k,n=n||Math.round(l[b+parseInt(a)-e.length+1].height*
(m/p));.5<=r+1-m%1?(r-=m%1,m=Math.floor(m)):(r+=1-m%1,m=Math.ceil(m));t.style.cssText="width: "+m+"px;height: "+n+"px;margin-right: "+(a<e.length-1?q:0)+"px";0===a&&(t.className+=" "+c.firstItemClass)}e=[];d=0}}}if(null!==f&&void 0!==f)if("appended"===d){d=JSON.parse(f.getAttribute("data-row-grid"));var p=f.getElementsByClassName(d.lastRowClass)[0],p=u(p);n(f,d,p)}else d||(d=JSON.parse(f.getAttribute("data-row-grid"))),n(f,d),f.setAttribute("data-row-grid",JSON.stringify(d)),d.resize&&window.addEventListener("resize",
function(g){n(f,d)})};