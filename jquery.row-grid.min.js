(function(f){function k(d,a,g){var f=0,e=[];g=g||d.children(a.itemSelector);var p=g.length;d.children("."+a.lastRowClass).removeClass(a.lastRowClass);for(var b=0;b<p;++b)g[b].removeAttribute("style"),g[b].classList?g[b].classList.remove(a.firstItemClass):g[b].className=g[b].className.replace(RegExp("(^|\\b)"+a.firstItemClass+"(\\b|$)","gi")," ");d=d[0].clientWidth;for(var q=[],b=0;b<p;++b)q[b]={outerWidth:g[b].offsetWidth,height:g[b].offsetHeight};for(b=0;b<p;++b){f+=q[b].outerWidth;e.push(g[b]);
if(b===p-1)for(var c=0;c<e.length;c++)0===c&&(e[c].className+=" "+a.lastRowClass),e[c].style["margin-right"]=c<e.length-1?a.minMargin:0;if(f+a.maxMargin*(e.length-1)>d){var l=f+a.maxMargin*(e.length-1)-d,c=e.length;if((a.maxMargin-a.minMargin)*(c-1)<l)var k=a.minMargin,l=l-(a.maxMargin-a.minMargin)*(c-1);else k=a.maxMargin-l/(c-1),l=0;for(var r,m=0,c=0;c<e.length;c++){r=e[c];var n=q[b+parseInt(c)-e.length+1].outerWidth,h=n-n/f*l,n=Math.round(q[b+parseInt(c)-e.length+1].height*(h/n));0.5<=m+1-h%1?
(m-=h%1,h=Math.floor(h)):(m+=1-h%1,h=Math.ceil(h));r.style.cssText="width: "+h+"px;height: "+n+"px;margin-right: "+(c<e.length-1?k:0)+"px";0===c&&(r.className+=" "+a.firstItemClass)}e=[];f=0}}}f.fn.rowGrid=function(d){if(0==this.length)return console.error('No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){f(this).rowGrid(d)});if("appended"===d){d=this.data("grid-options");var a=this.children("."+d.lastRowClass),a=a.nextAll().add(a);k(this,d,a)}else if(d=
f.extend({},f.fn.rowGrid.defaults,d),this.data("grid-options",d),k(this,d),d.resize)f(window).on("resize",{container:this},function(a){k(a.data.container,d)});return this};f.fn.rowGrid.defaults={minMargin:null,maxMargin:null,resize:!0,lastRowClass:"last-row",firstItemClass:null}})(jQuery);