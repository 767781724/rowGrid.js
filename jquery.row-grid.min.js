(function(e){function t(t,n,r){var i=t.outerWidth(),s=0,o=[],r=r||e(n["itemSelector"]),u=r.length-1;r.each(function(t,r){e(r).removeAttr("style").removeClass(n["firstItemClass"]);s+=e(r).outerWidth();o.push(r);if(t===u){e(o).each(function(t,r){if(t===0){e(r).addClass(n["lastRowClass"])}e(r).css("margin-right",t<o.length-1?n["maxMargin"]:0)})}if(s+n["maxMargin"]*(o.length-1)>i){var a=s+n["maxMargin"]*(o.length-1)-i;nrOfElems=o.length;var f=(n["maxMargin"]-n["minMargin"])*(nrOfElems-1);if(f<a){var l=n["minMargin"];a-=(n["maxMargin"]-n["minMargin"])*(nrOfElems-1)}else{var l=n["maxMargin"]-a/(nrOfElems-1);a=0}for(var c in o){var h=e(o[c]);if(c==0){h.addClass(n["firstItemClass"])}var p=h.outerWidth();var d=p-p/s*a;h.css("width",d).css("height",h.height()*(d/p)).css("margin-right",c<o.length-1?l:0)}o=[];s=0}})}e.fn.rowGrid=function(n){if(n==="appended"){n=this.data("grid-options");var r=this.children("."+n["lastRowClass"]);var i=r.nextAll().add(r);r.removeClass("last-row");t(this,n,i)}else{n=e.extend({},e.fn.rowGrid.defaults,n);var s=this;s.data("grid-options",n);t(s,n);if(n["resize"]){e(window).on("resize",function(){t(s,n)})}}return this};e.fn.rowGrid.defaults={minMargin:0,maxMargin:0,resize:true,lastRowClass:"last-row",firstItemClass:null};})(jQuery)
