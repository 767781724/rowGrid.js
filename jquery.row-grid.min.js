(function(h){function k(c,a,f){var l=0,e=[];f=f||c.querySelectorAll(a.itemSelector);for(var q=f.length,b=0;b<q;++b)f[b].removeAttribute("style"),f[b].classList?f[b].classList.remove(a.firstItemClass,a.lastRowClass):f[b].className=f[b].className.replace(RegExp("(^|\\b)"+a.firstItemClass+"|"+a.lastRowClass+"(\\b|$)","gi")," ");c=c.clientWidth-parseFloat(h(c).css("padding-left"))-parseFloat(h(c).css("padding-right"));for(var r=[],b=0;b<q;++b)r[b]={outerWidth:f[b].offsetWidth,height:f[b].offsetHeight};
for(b=0;b<q;++b){l+=r[b].outerWidth;e.push(f[b]);if(b===q-1)for(var d=0;d<e.length;d++)0===d&&(e[d].className+=" "+a.lastRowClass),e[d].style.marginRight=d<e.length-1?a.minMargin+"px":0;if(l+a.maxMargin*(e.length-1)>c){var m=l+a.maxMargin*(e.length-1)-c,d=e.length;if((a.maxMargin-a.minMargin)*(d-1)<m)var k=a.minMargin,m=m-(a.maxMargin-a.minMargin)*(d-1);else k=a.maxMargin-m/(d-1),m=0;for(var s,n=0,d=0;d<e.length;d++){s=e[d];var p=r[b+parseInt(d)-e.length+1].outerWidth,g=p-p/l*m,p=Math.round(r[b+parseInt(d)-
e.length+1].height*(g/p));0.5<=n+1-g%1?(n-=g%1,g=Math.floor(g)):(n+=1-g%1,g=Math.ceil(g));s.style.cssText="width: "+g+"px;height: "+p+"px;margin-right: "+(d<e.length-1?k:0)+"px";0===d&&(s.className+=" "+a.firstItemClass)}e=[];l=0}}}h.fn.rowGrid=function(c){if(0==this.length)return console.error('No element found for "'+this.selector+'".'),this;if(1<this.length)return this.each(function(){h(this).rowGrid(c)});if("appended"===c){c=this.data("grid-options");var a=this.children("."+c.lastRowClass),a=
a.nextAll().add(a);k(this[0],c,a)}else if(c=h.extend({},h.fn.rowGrid.defaults,c),this.data("grid-options",c),k(this[0],c),c.resize)h(window).on("resize.rowGrid",{container:this[0]},function(a){k(a.data.container,c)});return this};h.fn.rowGrid.defaults={minMargin:null,maxMargin:null,resize:!0,lastRowClass:"last-row",firstItemClass:null}})(jQuery);