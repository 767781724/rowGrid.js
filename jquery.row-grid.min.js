(function(b){b.fn.rowGrid=function(c){if(c==="appended"){c=this.data("grid-options");var d=this.children("."+c.lastRowClass);var f=d.nextAll().add(d);a(this,c,f)}else{c=b.extend({},b.fn.rowGrid.defaults,c);var e=this;e.data("grid-options",c);a(e,c);if(c.resize){b(window).on("resize",{container:e},function(g){a(g.data.container,c)})}}return this};b.fn.rowGrid.defaults={minMargin:0,maxMargin:0,resize:true,lastRowClass:"last-row",firstItemClass:null};function a(h,d,i){var f=h.width()-(h[0].offsetWidth-h[0].clientWidth),c=0,g=[],i=i||h.children(d.itemSelector),e=i.length-1;h.children("."+d.lastRowClass).removeClass(d.lastRowClass);i.each(function(o,j){b(j).removeAttr("style").removeClass(d.firstItemClass);c+=b(j).outerWidth();g.push(j);if(o===e){b(g).each(function(s,t){if(s===0){b(t).addClass(d.lastRowClass)}b(t).css("margin-right",(s<g.length-1)?d.minMargin:0)})}if(c+d.maxMargin*(g.length-1)>f){var r=c+d.maxMargin*(g.length-1)-f;nrOfElems=g.length;var n=(d.maxMargin-d.minMargin)*(nrOfElems-1);if(n<r){var m=d.minMargin;r-=(d.maxMargin-d.minMargin)*(nrOfElems-1)}else{var m=d.maxMargin-r/(nrOfElems-1);r=0}for(var q in g){var p=b(g[q]);if(q==0){p.addClass(d.firstItemClass)}var k=p.outerWidth();var l=k-(k/c)*r;p.css("width",l).css("height",p.height()*(l/k)).css("margin-right",(q<g.length-1)?m:0)}g=[];c=0}})}})(jQuery);
